# Documentation #

## Introduction ##

My name is Lasse Bech Jensen and I am the authour of this project.

This project is the solution to a programming task given to me by Unisport A/S as part of the job interviews.

The project required me to make simple python webservice that lists products using data available at this link: http://www.unisport.dk/api/sample/

The project would have a view of the list of all the products, a list for all the kids project as well as a page system for the two lists and lastly a view of individual products.

To make this webservice I used the Django web framework which provides many useful functions for both testing the webservice and deploying it.

## Required dependencies ##

This is a list of dependencies required to run the program as well as instructions on how to install them.

### Python 2.7.X ###

The program is made to be used with Python 2.7.X. If you dont have Python 2.7.X installed on your system you can download the latest version here: https://www.python.org/downloads/ .
Make sure that you download Python 2.7.X and not the newer Python 3.X.X.

### Django 1.11.1 ###

The program is made using the Django web framework.
The easiest way to install the framework is by using pip which is bundled together with Python 2.7.X.
To install Django 1.11.1 open a command prompt or terminal and type:

```
pip install Django==1.11.1
```

Other ways to get Django installed can be found on their website: https://www.djangoproject.com/download/

## Usage ##

To view the webservice on a local server you can through your command prompt or terminal navigate to the directory containing the manage.py file and input the following command:

```
python manage.py runserver
```

This will make it possible to open your browser and access the webservice through the URL http://127.0.0.1:8000/

To run the tests you can again use your command prompt or terminal and again navigate to the same directory as the manage.py file and run the following command:

```
python manage.py test
```

Once you have accessed the webservice through your browser you should then be redirected to the /products/ view and from there you can follow the links to either view the kids only products, the inidividual products or the next/previous page of the list.

## File documentation ##

In the sea of files auto generated by Django these are the ones that I have modified/created and are the ones that control the behaviour and appearance of the webservice.

### sample/urls.py ###

This file contains the main URL dispatcher for the webservice.

There are only two URL rules:

* Any URL with /products/ after the root will use the URL dispatcher and the rules in products/urls.py.
* Any request to the root will be redirected to /products/ using a RedirectView. The redirect is set as non-permanent because it could quite possibly point to an index view instead, but for the time being it will just redirect.

### products/urls.py ###

This file contains the URL dispatcher for the /products/ URLs.

It has four URL rules:

* The empty rule (which is /products/) will call on the view views.products.
* The rule (kids) will also call views.products, but because the word kids is in parenthesis it will pass this as the second argument to the view. This rule could also be generalized to a rule like ([a-z]+) which would allow for more categories to be added to the view, but for the current implementation it is enough to only cover one single case.
* The rule id/ will call on the view views.product_id.
* The rule id/(\d+)/ also calls on views.product_id, but like with the kids rule this rule will pass the number inside of the parenthesis to the view. \d+ is regex for a number with one or more digits, but I could also have used [0-9]+ to the same effect.

### products/views.py ###

In this file the behaviour and appearance of the views are defined.
It contains four functions. Two views and two helper functions.

**products(request, kids=None)**

This view returns the list of products.
It has an optional parameter kids which by default is set to None, but if a client requests /products/kids/ the URL dispatcher should call the view with "kids" in the second argument and this is how the view knows if you want the list of all products or the list of kids products.

Before the functions are defiend a global variable is declared and set to the list of products, by getting the products property from the JSON data from the link.
Afterwards the product list is sorted by its price property.
Another list of only kids products is also created by taking all products from the previous list that has a property kids equal to "1".

If the kids argument is not set then the page is deduced to be the list of all products and we will use the list of all products.
Else if the kids argument is set then we will use the list of kids products instead.

The view will also attempt to get the value of the page parameter from the URL.
If the page parameter is not set or if it is not a number or if it is less than one then the page number is set to one else the page number is set to the value of the page parameter.
The page number is then used to calculate the index of the first product on the page, by taking the page number minus one and multiplying by the amount of items we want to show per page.

A table is then made to show the list of products for this page.
The view will then show an amount of products depending on what variable is set in the items_per_page variable up untill the end of whichever list it is showing.

The pages are shown at the bottom with Page # of # and a link to the previous page if you are on a page higher than one and a link to the next page if the current page is not the last page.

**product_id(request, pid=None)**

This view will either show information about a specific product or an error message detailing that the provided id is invalid.
It is through the optional parameter pid that the product id is provided and if it can find a product from the list with that id then it will show information about it.
If it can not find a product with the provided id then it will show the error message about an invalid id.
Also if the product has a price_old property that is not empty and is higher than the price property then it will also be shown, but with a strike through to denote that it is not the actual price.

**header(title)**

This function is a helper function I have created to return the first part of a basic HTML document.
The function also has a title argument to allow the caller to specify a title for the page.

**footer()**

This function is also a helper function.
It will return the last part of a basic HTML document.
It does not have any arugments.

### products/tests.py ###

The final file that I have created contain four tests for webservice.
The first test case tests the redirect from the root to /products/.
The second test case tests that the products view loads.
The third test case tests that the products view will also load when giving the page parameter in the URL.
And the fourth test cast tests that the product_id view loads.

## Conclusion ##

I have made the webservice as the assignment suggested, though without completing any of the bonus tasks.

I have through this project adapted to writing in Python, which I already knew before but have not used much.

I also became invested in using the Django framework and spent a great deal of time looking documentation and tutorials for the framework.

I should note that the HTML used in this project is not up to W3C standards being that it is without a doc type and I have used deprecated HTML tags, but it got the work done without using stylesheets.

All in all I consider this project complete and all the required tasks to have been completed.
I am quite sure that there are several ways to implement these functions, but I feel that the way I have it is the way that makes the most sense to myself.